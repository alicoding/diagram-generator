{% import 'theme.j2' as theme_macros %}
{{ theme_macros.render_theme(config) }}
C4Context
  title {{ config.title }}

{% for component in components %}
  {% if component.type.value == 'person' %}
    Person({{ component.id }}, "{{ component.name }}", "{{ component.description }}")
  {% elif component.type.value == 'system' %}
    System({{ component.id }}, "{{ component.name }}", "{{ component.description }}")
  {% elif component.type.value == 'external_system' %}
    System_Ext({{ component.id }}, "{{ component.name }}", "{{ component.description }}")
  {% elif component.type.value == 'generic' %}
    System({{ component.id }}, "{{ component.name }}", "{{ component.description }}")
  {% else %}
    System({{ component.id }}, "{{ component.name }}", "{{ component.description }}")
  {% endif %}
{% endfor %}

{% for rel in relationships %}
  Rel({{ rel.source_id }}, {{ rel.target_id }}, "{{ rel.description }}", "{{ rel.protocol or '' }}")
{% endfor %}
